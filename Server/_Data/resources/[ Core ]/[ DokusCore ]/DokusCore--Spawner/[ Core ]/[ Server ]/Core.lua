--------------------------------------------------------------------------------
----------------------------------- DevDokus -----------------------------------
--------------------------------------------------------------------------------
----------------------- I feel a disturbance in the force ----------------------
--------------------------------------------------------------------------------
Routes = {}
Low = string.lower
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
CreateThread(function()
  if (_Modules.Spawner) then
    for k,v in pairs(_Spawner.Cutscenes) do
      local City, Heading, ID = v.City, v.Coords.Heading, v.ID
      local sCoords, eCoords, InUse = v.Coords.Start, v.Coords.End, false
      table.insert(Routes, {
        ID = ID,
        City = City,
        Heading = Heading,
        sCoords = sCoords,
        eCoords = eCoords,
        InUse   = InUse
      })
    end
  end
end)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
RSC('DokusCore:Spawner:GetRoute', function(source, args)
  local Route, Count = nil, 0
  local SP = _Spawner.StartPosition
  local Ran = _Spawner.StartRandomizer
  if ((SP == nil) or (SP == '')) then
    while true do Wait(1)
      local R = Routes[math.random(#Routes)]
      if (not (R.InUse)) then Route = R return Route end
    end
  else
    if (Ran) then
      while true do Wait(1)
        local R = Routes[math.random(#Routes)]
        if (Low(SP) == (Low(R.City))) then
          if (not (R.InUse)) then Route = R return Route end
        end
      end
    else
      while true do Wait(100)
        Count = (Count + 1)
        local R = Routes[Count]
        if (Low(SP) == (Low(R.City))) then
          if (not (R.InUse)) then Route = R return Route end
        end
      end
    end
  end
end)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
RSC('DokusCore:Spawner:RouteInUse', function(source, ID) return Routes[ID].InUse end)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
RSC('DokusCore:Spawner:ResetRoute', function(source, ID) Routes[ID].InUse = false end)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
--------------------------------------------------------------------------------







--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
