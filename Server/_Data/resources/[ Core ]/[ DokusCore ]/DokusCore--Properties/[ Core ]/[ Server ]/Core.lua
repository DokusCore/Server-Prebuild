------------------------------------------------------------------------------
-------------------------------- DokusCore -----------------------------------
------------------------------------------------------------------------------
--------------------- I feel a disturbance in the force ----------------------
------------------------------------------------------------------------------
-- This sets all house IDs to the keys for all doors when in use.
-- This is needed in order for the key to unlock the door, and to connect
-- multiple doors to 1 property or house.
------------------------------------------------------------------------------
------------------------------------------------------------------------------
local Exist, Result, FirstStart = false, {}, false
------------------------------------------------------------------------------
------------------------------------------------------------------------------
CreateThread(function()
  if (_Modules.Properties) then
    local WaitForDB = true
    while (WaitForDB) do Wait(1000)
      local X = DBGet(DB.System.GetAll, {}, function() end)
      if (X[1] ~= nil) then Exist = true Result = X end
      if (not (Exist)) then Wait(1000) end
      if ((Exist) and (Result[1].Properties_Doors == 1)) then WaitForDB = false end
      Exist, Result = false, {}
    end

    for k,v in pairs(_Properties.Doors) do
      local X = DBGet(DB.DoorLocks.GetViaHash, { Hash = v.Hash })
      if (X[1] ~= nil) then Exist = true Result = X end
      if ((Exist) and (v.Enabled)) then
        if (X[1].HouseID == nil) then
          local Table = DB.DoorLocks.SetHouseIDViaHash
          DBSet(Table, { HouseID = v.ID, Hash = v.Hash })
        end
      elseif ((Exist) and (not (v.Enabled))) then
        if (X[1].HouseID ~= nil) then
          local Table = DB.DoorLocks.SetHouseIDViaHash
          DBSet(Table, { HouseID = nil, Hash = v.Hash })
        end
      end
    end
  end
end)
------------------------------------------------------------------------------
------------------------------------------------------------------------------
RSC('DokusCore:Properties:Get:FirstStart', function(source, args) return FirstStart end)
------------------------------------------------------------------------------
------------------------------------------------------------------------------
RegisterServerEvent('DokusCore:Properties:Set:FirstStart')
AddEventHandler('DokusCore:Properties:Set:FirstStart', function() FirstStart = true end)
------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------

------------------------------------------------------------------------------
------------------------------------------------------------------------------
